---
interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
<meta name="google-site-verification" content="cX_LT9iyJy-maXPw1hTRArarRWcNsAAXNPKSZgeLaIE" />
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "p20afpcx1x");
</script>
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
  </head>
  <body class="bg-gray-50">
    <slot />

    <!-- Exit Intent Popup -->
    <div id="exitPopup" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
      <div class="bg-white p-4 rounded-lg max-w-xl mx-auto relative">
        <button 
          id="closePopup"
          class="absolute top-2 right-2 text-gray-500 hover:text-gray-700"
          aria-label="Close popup"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
        <img 
          src="/images/banner.jpg" 
          alt="Black Friday Semrush Deal" 
          class="w-full h-auto"
          onerror="this.style.display='none'"
        />
        <div class="text-center mt-4">
          <h3 class="text-xl font-bold mb-2">ðŸ”¥ Don't Miss Out!</h3>
          <p class="mb-4">Get your exclusive Semrush discount and FREE $300 SEO consultation now!</p>
          <a href="https://semrush.sjv.io/c/3485346/2212097/13053" 
             class="inline-block bg-orange-500 text-white font-bold py-3 px-8 rounded-full hover:bg-orange-600 transition-colors">
            Save $300 Now
          </a>
        </div>
      </div>
    </div>

    <script>
      // Custom exit intent and timer popup implementation
      window.addEventListener('load', function() {
        const popup = document.getElementById('exitPopup');
        const closeBtn = document.getElementById('closePopup');
        let showPopup = true;

        // Show popup after 30 seconds
        setTimeout(() => {
          if (showPopup) {
            popup.classList.remove('hidden');
          }
        }, 30000);

        // Exit intent detection
        document.addEventListener('mouseleave', (e) => {
          if (e.clientY <= 0 && showPopup) {
            popup.classList.remove('hidden');
          }
        });

        // Close popup when clicking outside or on close button
        popup.addEventListener('click', function(e) {
          if (e.target === this) {
            this.classList.add('hidden');
            showPopup = false;
          }
        });

        closeBtn.addEventListener('click', function() {
          popup.classList.add('hidden');
          showPopup = false;
        });
      });
    </script>
  </body>
</html>
